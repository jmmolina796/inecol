!function(t){"use strict";var e=function(t){var e=arguments,i=!0,o=1;return t=t.replace(/%s/g,function(){var t=e[o++];return"undefined"==typeof t?(i=!1,""):t}),i?t:""},i=function(e,i){var o=-1;return t.each(e,function(t,e){return e.field===i?(o=t,!1):!0}),o},o=function(e,i,o,r){if("string"==typeof i){var n=i.split(".");n.length>1?(i=window,t.each(n,function(t,e){i=i[e]})):i=window[i]}return"object"==typeof i?i:"function"==typeof i?i.apply(e,o):r};t.extend(t.fn.bootstrapTable.defaults,{filterControl:!1,onColumnSearch:function(t,e){return!1}}),t.extend(t.fn.bootstrapTable.COLUMN_DEFAULTS,{filterControl:void 0}),t.extend(t.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});var r=t.fn.bootstrapTable.Constructor,n=r.prototype.initHeader,a=r.prototype.initBody,s=r.prototype.initSearch;r.prototype.initHeader=function(){if(n.apply(this,Array.prototype.slice.apply(arguments)),this.options.filterControl){var i,o,r=!1,a=this,s=0;t.each(this.options.columns,function(t,n){if(i="hidden",o=[],n.filterControl)switch(o.push('<div style="margin: 7px 2px 2px 2px;" class="filterControl">'),n.filterControl&&n.searchable&&(r=!0,i="visible"),n.filterControl.toLowerCase()){case"input":o.push(e('<input type="text" class="form-control" style="width: 100%; visibility: %s">',i));break;case"select":o.push(e('<select class="%s form-control" style="width: 100%; visibility: %s"></select>',n.field,i))}else o.push('<div style="height: 0px;"></div>');a.$header.find(e('.th-inner:contains("%s")',n.title)).next().append(o.join(""))}),r?(this.$header.off("keyup","input").on("keyup","input",function(t){clearTimeout(s),s=setTimeout(function(){a.onColumnSearch(t)},a.options.searchTimeOut)}),this.$header.off("change","select").on("change","select",function(t){clearTimeout(s),s=setTimeout(function(){a.onColumnSearch(t)},a.options.searchTimeOut)})):this.$header.find(".filterControl").hide()}},r.prototype.initBody=function(){a.apply(this,Array.prototype.slice.apply(arguments));for(var e=this,r=this.getData(),n=this.pageFrom-1;n<this.pageTo;n++){var s=r[n];t.each(this.header.fields,function(r,a){var l=s[a],p=e.options.columns[i(e.options.columns,a)];if(l=o(e.header,e.header.formatters[r],[l,s,n],l),(!p.checkbox||!p.radio)&&void 0!==p.filterControl&&"select"===p.filterControl.toLowerCase()&&p.searchable){var u,f=t("."+p.field),c=0,h=!1;if(void 0!==f)if(u=f.get(0).options,0===u.length)f.append(t("<option></option>").attr("value","").text("")),f.append(t("<option></option>").attr("value",l).text(l));else{for(;c<u.length;c++)if(u[c].value===l){h=!0;break}h||f.append(t("<option></option>").attr("value",l).text(l))}}})}},r.prototype.initSearch=function(){s.apply(this,Array.prototype.slice.apply(arguments));var e=this,i=t.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=i?t.grep(this.data,function(r,n){for(var a in i){var s=i[a].toLowerCase(),l=r[a];if(l=o(e.header,e.header.formatters[t.inArray(a,e.header.fields)],[l,r,n],l),-1===t.inArray(a,e.header.fields)||"string"!=typeof l&&"number"!=typeof l||-1===(l+"").toLowerCase().indexOf(s))return!1}return!0}):this.data},r.prototype.onColumnSearch=function(e){var i=t.trim(t(e.currentTarget).val()),o=t(e.currentTarget).parent().parent().parent().data("field");t.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),i?this.filterColumnsPartial[o]=i:delete this.filterColumnsPartial[o],this.options.pageNumber=1,this.onSearch(e),this.updatePagination(),this.trigger("column-search",o,i)}}(jQuery);